### 1.CAP原理

- 要想数据高可用，就得写多份数据

- 写多分数据就会导致数据一致性问题

- 数据一致性问题会引起性能问题


### 2.一致性模型

1. 弱一致性
2. 最终一致性（一段时间达到一致性）
3. 强一致



## 解决一致性事务问题的方案

  1. Master -Slave

- 读写请求由Master负责
- 写请求写到Master后，由Master同步到Slave上
  - 由Master push or Slave pull
  - 通常是由Slave 周期性来pull，所以是最终一致性

问题： 若在 pull 周期内（不是期间？），master挂掉，那么会导致这个时间片内的数据丢失

- 若不想让数据丢掉，Slave 只能成为 ReadOnly方式等Master恢复
- 若容忍数据丢失，可以让 Slave代替Master工作

如何保证强一致性？

- Master 写操作，写完成功后，再写 Slave，两者成功后返回成功。若 Slave失败，两种方法
  1. 标记 Slave 不可用报错，并继续服务（等恢复后，再同步Master的数据，多个Slave少了一个而已）
  2. 回滚自己并返回失败
  
  
  
  https://blog.csdn.net/followmyinclinations/article/details/52870418